[ai.html](https://github.com/user-attachments/files/22678400/ai.html)
<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>AI顔診断</title>
<link rel="stylesheet" href="style.css"/>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
</head>
<body>
<div class="wrap">
  <header>
    <h1>AIかっこよさ診断</h1>
  </header>

  <!-- 診断前ページ -->
  <section id="prePanel" class="panel">
    <div>
      <label>みなさんからの評価</label>
      <div id="rating" class="stars"></div>
    </div>
    <div class="row" style="margin-top:12px">
      <div><button id="startBtn">診断を始める</button></div>
      <div class="small">診断は約15秒の処理を行います。</div>
    </div>
  </section>

  <!-- カメラ撮影 -->
  <section id="cameraPanel" class="panel" style="display:none">
    <div class="row" style="align-items:flex-start">
      <div>
        <label>カメラ</label><br/>
        <video id="video" autoplay playsinline></video>
        <canvas id="canvas" width="640" height="480"></canvas>
        <div style="margin-top:8px">
          <button id="snapBtn">写真を撮る</button>
          <button id="cancelCam" class="ghost">キャンセル</button>
        </div>
      </div>
      <div style="flex:1;min-width:260px">
        <label>プレビュー / 診断ログ</label>
        <div id="log" class="output">ここに診断ログが表示されます。</div>
      </div>
    </div>
  </section>

  <!-- 診断中 -->
  <section id="loadingPanel" class="panel" style="display:none">
    <label>診断中…</label>
    <div style="margin:8px 0" class="progress"><div class="bar" id="bar"></div></div>
    <div class="row" style="justify-content:space-between;align-items:center">
      <div class="small" id="statusTxt">診断を開始しました</div>
      <div class="small">残り 約<span id="timeLeft">15</span> 秒</div>
    </div>
  </section>

  <!-- 診断後ページ -->
  <section id="resultPanel" class="panel" style="display:none">
    <h2>診断結果</h2>
    <img id="thumb" src="" alt="thumb" style="width:200px;height:auto;border-radius:8px;border:1px solid #ddd"/>
    <p id="resultText" class="small"></p>
    <div id="map"></div>
    <p class="small" id="coordText" style="margin-top:8px"></p>

    <div id="sendCountdown">送信まで残り: <span id="sendTime">15</span> 秒</div>
    <button id="stopBtn">送信を停止</button>
  </section>

  <!-- 送信完了ページ -->
  <section id="finishPanel" class="panel" style="display:none;text-align:center">
    <h2>データは送信されました！</h2>
    <button id="restartBtn">最初のページに戻る</button>
  </section>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="script.js"></script>
</body>
</html>
